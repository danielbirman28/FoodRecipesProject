# Investigating the relationship between dessert recipes and their total steps

By Daniel Birman and Megha Kataki

## Overview

This is a data science project for DSC80 at UCSD focusing on exploring the relationship between healthy vs non healthy recipes, and how many steps each recipe contains.

## Introduction

Recipes are an integral part of our daily lives, guiding us in preparing various dishes. Understanding what influences the complexity of a recipe can help both cooking enthusiasts and professionals alike. Whether it's for planning a quick weekday meal or preparing for a special occasion, knowing the factors affecting the number of steps in a recipe can streamline the cooking process and help achieve desired outcomes. So ultimately we aim to explore the question, **what factors influence the number of steps in a recipe?** To answer this question, we are using two datasets consisting of recipes and ratings that have been posted to the website [food.com](https://www.food.com/) since 2008. These datasets provide a wealth of information about various recipes, including ingredients, cooking steps, ratings, and nutritional details.

The first dataset is titled <code class="language-plaintext highlighter-rouge">recipe</code> and has 83782 rows and 12 columns. These columns are designated as such:

| Column | Description |
| ----------- | ----------- |
| <code class="language-plaintext highlighter-rouge">'name'</code> | Recipe Name |
| <code class="language-plaintext highlighter-rouge">'id'</code> | Recipe ID |
| <code class="language-plaintext highlighter-rouge">'minutes'</code> | How many minutes it takes to prepare the recipe |
| <code class="language-plaintext highlighter-rouge">'contributed_id'</code> | The User ID of who submitted the recipe |
| <code class="language-plaintext highlighter-rouge">'submitted'</code> | Date the recipe was submitted |
| <code class="language-plaintext highlighter-rouge">'tags'</code> | A description of tags relevant to the recipe |
| <code class="language-plaintext highlighter-rouge">'nutrition'</code> | Nutrition information in the form [calories (#), total fat (PDV), sugar (PDV), sodium (PDV), protein (PDV), saturated fat (PDV), carbohydrates (PDV)]; where PDV stands for “percentage of daily value” |
| <code class="language-plaintext highlighter-rouge">'n_steps'</code>  | The total number of steps in the recipe |
| <code class="language-plaintext highlighter-rouge">'steps'</code>  | The detailed steps for the recipe |
| <code class="language-plaintext highlighter-rouge">'description'</code>  | A user-submitted description |
| <code class="language-plaintext highlighter-rouge">'ingredients'</code>  | List of ingredients needed |
| <code class="language-plaintext highlighter-rouge">'n_ingredients'</code>  | Total number of ingredients needed |

The second dataset is titled <code class="language-plaintext highlighter-rouge">interactions</code> and it has 731,927 rows. Each row contains a rating and a review of someone who tried a specific recipe. The dataset has 4 columns and they are designated as such:

| Column | Description |
| ----------- | ----------- |
| <code class="language-plaintext highlighter-rouge">'user_id'</code> | User ID |
| <code class="language-plaintext highlighter-rouge">'recipe_id'</code> | Recipe ID |
| <code class="language-plaintext highlighter-rouge">'date'</code> | Date of interaction |
| <code class="language-plaintext highlighter-rouge">'rating'</code> | The rating given |
| <code class="language-plaintext highlighter-rouge">'review'</code> | The review given |

## Data Cleaning and Exploratory Data Analysis
To aid in our exploration, we cleaned our data set in the following ways:
1. Left merge the recipes and interactions datasets together
  - We did this to assign an interaction row to a recipe row.
2. Fill all ratings of 0 with np.nan
 - To avoid bias in the rating column, we replaced any 0 ratings with a NaN value, as ratings are only on a scale from 1 to 5, and a 0 would indicate bias.
3. Find the average rating per recipe, as a Series, and assign it a column <code class="language-plaintext highlighter-rouge">'avg_rating'</code>
 - This was done because the average rating per recipe is more valuable to look at compared to an individual rating left by a reviewer.
4. Assign columns into a logical order based off food.com
  - We reordered our dataframe to match the order in which information is presented on a recipe from food.com.
5. Convert the <code class="language-plaintext highlighter-rouge">'submitted'</code> and <code class="language-plaintext highlighter-rouge">'date'</code> column from objects to datetime objects
  - This was done in order to more easily perform analysis across dates as they were originally stored as an object.
6. Create an <code class="language-plaintext highlighter-rouge">'is_healthy'</code> column.
- We created this column in order to aid in our analysis of healthy versus non-healthy recipe items more easily.

After performing these data cleaning operations, our <code class="language-plaintext highlighter-rouge">cleaned</code> data frame has 234428 rows and 23 columns. Here we will show the first 5 rows for simplicity.
|   user_id |   recipe_id | date       |   rating | review                                                                                                                                                                                                                                                                                                                                                                                                                                                          | name                                                           |   minutes |   contributor_id | submitted   | tags                                                                                                                                                                                                                                                                                                                                                                                                    |   n_steps | steps                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | description                                                                                                                                                                                                                                                | ingredients                                                                                                                                                                                                                                                               |   n_ingredients |   avg_rating |   calories (#) |   total fat (PDV) |   sugar (PDV) |   sodium (PDV) |   protein (PDV) |   saturated fat (PDV) |   carbohydrates (PDV) |
|----------:|------------:|:-----------|---------:|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------------------------------------------------------|----------:|-----------------:|:------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------:|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------:|-------------:|---------------:|------------------:|--------------:|---------------:|----------------:|----------------------:|----------------------:|
|    483827 |      306785 | 2008-07-15 |        5 | Being a  huge fan of America's Test Kitchen  I just had  to try this and I am  sure glad I did. It is really good. Sweet  corn is  just  coming in season here  and I have  chives in my herb garden so I had all the  best ingredients. I did  use a Jalapeno from the  garden instead of the  habanero. I  just made this and I plan to have it with some chicken. I'll  bet you could use some nice peaches to change it up a bit.      Thanks for posting . | spicy nectarine and corn salsa                                 |        40 |           377499 | 2008-06-02  | ['60-minutes-or-less', 'time-to-make', 'course', 'main-ingredient', 'preparation', 'occasion', 'low-protein', 'healthy', 'appetizers', 'side-dishes', 'fruit', 'vegetables', 'easy', 'beginner-cook', 'low-fat', 'picnic', 'summer', 'dietary', 'low-cholesterol', 'seasonal', 'low-saturated-fat', 'low-calorie', 'healthy-2', 'low-in-something', 'pitted-fruit', 'corn', 'to-go', '3-steps-or-less'] |         4 | ['in a medium bowl , toss together nectarines , corn , shallot , chile , 1 tablespoon lime juice , and salt', 'let stand at room temperature for 15 to 30 minutes', 'adjust seasoning with additional lime juice , salt , and sugar as needed', 'stir in chives']                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | from my heros at america's test kitchen (cooks illustrated, summer 2008). the cooking time is actually the resting time needed for the acid in the lime juice to mellow the flavors. match this to grilled pork, chicken, shrimp, or scallops.             | ['nectarines', 'ear of corn', 'shallot', 'habanero pepper', 'lime juice', 'salt', 'sugar', 'fresh chives']                                                                                                                                                                |               8 |        5     |           95.3 |                 1 |            50 |             16 |               5 |                     0 |                     7 |
|      5060 |      310237 | 2010-05-07 |        5 | wow red and white sweetness!  DH loved them , I found them a bit two sweet for me but a nice change to serve strawberries.  very easy recipe, but I think 8 ounces of strawvberries is not enough, if I make them again I will double the strawberries and use about half of the cool whip. (I use light cool whip.)  Thanks for posting.                                                                                                                       | french strawberry crepes                                       |        30 |           452576 | 2008-06-19  | ['30-minutes-or-less', 'time-to-make', 'course', 'main-ingredient', 'cuisine', 'preparation', 'occasion', 'breakfast', 'fruit', 'french', 'european', 'kid-friendly', 'dietary', 'berries', 'strawberries', 'brunch']                                                                                                                                                                                   |         9 | ['for the filling: toss the strawberries and brown sugar in a bowl and set aside', 'for the crepes:in a medium bowl whisk flour , egg , oil , vanilla , baking powder , cinnamon , and skim milk', 'heat frying pan over medium heat and spray with cooking spray', 'pour 1 / 3 a cup of the batter in the pan and make sure it evenly covers the bottom', 'cook each side for 30-45 seconds on each side and remove to a plate', 'when all crepes are fully cooked , spread one or two spoonfuls of cool whip into the middle , cover with a spoonful of the berry mixture', 'then wrap one side of the crepe over the mix and the other side over the first', 'cover with cool whip and more berry mix', 'repeat and enjoy !']                                                                                                             | yummy and sweet french-style strawberry breakfast crepes!                                                                                                                                                                                                  | ['strawberries', 'brown sugar', 'cool whip free', 'flour', 'egg', 'oil', 'vanilla extract', 'baking powder', 'cinnamon', 'skim milk']                                                                                                                                     |              10 |        5     |          143.5 |                 5 |            25 |              3 |              10 |                     3 |                     7 |
|           |             |            |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                |           |                  |             |                                                                                                                                                                                                                                                                                                                                                                                                         |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                           |                 |              |                |                   |               |                |                 |                       |                       |
|           |             |            |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                |           |                  |             |                                                                                                                                                                                                                                                                                                                                                                                                         |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | you can change around the types of fruits to fit your tastes and even add chocolate chips, nuts, or chocolate shavings if you'd like.                                                                                                                      |                                                                                                                                                                                                                                                                           |                 |              |                |                   |               |                |                 |                       |                       |
|    935485 |      321038 | 2009-06-22 |        5 | Being a healthy bar this is very good.  I make just a couple of changes.  I used stevia instead of splenda.  I used recipe #81194 for the egg substitue.  And I used pure vanilla extract instead of the coffee mate.  I will be making a lot of these!                                                                                                                                                                                                         | hg s grab  n go breakfast cookies   weight watchers   2 points |        22 |           346383 | 2008-08-24  | ['30-minutes-or-less', 'time-to-make', 'course', 'preparation', 'occasion', 'drop-cookies', 'breakfast', 'desserts', 'finger-food', 'cookies-and-brownies', 'comfort-food', 'brown-bag', 'taste-mood', 'sweet', 'to-go', 'presentation']                                                                                                                                                                |        14 | ['preheat oven to 375 degrees', 'chop raisins and craisins into small pieces', 'set aside', 'in a mixing bowl , combine the oats , flour , fiber one crumbs , splenda , brown sugar , baking powder , cinnamon , and salt', 'mix well', 'in a separate bowl , dissolve coffee -mate into 2 tablespoons hot water', 'add all other wet ingredients , and mix well', 'add liquid mixture to the dry ingredients , and stir until completely blended', "slowly sprinkle chopped raisins and craisins into the batter , making sure they don't all stick together", 'spray a large baking pan with nonstick spray , and spoon batter into 4 evenly spaced circles', 'spread batter out a bit with the back of a spoon', 'place pan in the oven for 12 - 14 minutes', 'remove pan from the oven and allow to cool slightly', "then grab 'n go !"] | i received a hungry girl email today and this was one of the recipes that were featured.  here is what the email said about the recipe:                                                                                                                    | ['oats', 'whole wheat flour', 'fiber one cereal', 'splenda granular', 'peach baby food', 'canned pumpkin', 'liquid egg substitute', 'golden raisin', 'craisins', 'brown sugar', 'sugar-free french vanilla powdered coffee creamer', 'baking powder', 'cinnamon', 'salt'] |              14 |        5     |          182.4 |                 2 |            50 |              7 |              11 |                     1 |                    13 |
|           |             |            |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                |           |                  |             |                                                                                                                                                                                                                                                                                                                                                                                                         |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | these things are large, fiber-packed, portable, and sooo delicious!!!! make a batch in the pm, and you'll have super-quick b-fasts for the next few ams!                                                                                                   |                                                                                                                                                                                                                                                                           |                 |              |                |                   |               |                |                 |                       |                       |
|           |             |            |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                |           |                  |             |                                                                                                                                                                                                                                                                                                                                                                                                         |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | hg alternative! if you don't feel like whipping out the blender to grind that fiber one, simply leave the f1 crumbs out of the recipe. your cookies won't be as high in fiber, but they'll still taste great and clock in with a points. value of 2* each. |                                                                                                                                                                                                                                                                           |                 |              |                |                   |               |                |                 |                       |                       |
|    539686 |      321038 | 2011-03-28 |        5 | My very health conscious daughter and I tripled this recipe and love them as cookie-sized treats. Very filling and healthy too. Thanks for posting.                                                                                                                                                                                                                                                                                                             | hg s grab  n go breakfast cookies   weight watchers   2 points |        22 |           346383 | 2008-08-24  | ['30-minutes-or-less', 'time-to-make', 'course', 'preparation', 'occasion', 'drop-cookies', 'breakfast', 'desserts', 'finger-food', 'cookies-and-brownies', 'comfort-food', 'brown-bag', 'taste-mood', 'sweet', 'to-go', 'presentation']                                                                                                                                                                |        14 | ['preheat oven to 375 degrees', 'chop raisins and craisins into small pieces', 'set aside', 'in a mixing bowl , combine the oats , flour , fiber one crumbs , splenda , brown sugar , baking powder , cinnamon , and salt', 'mix well', 'in a separate bowl , dissolve coffee -mate into 2 tablespoons hot water', 'add all other wet ingredients , and mix well', 'add liquid mixture to the dry ingredients , and stir until completely blended', "slowly sprinkle chopped raisins and craisins into the batter , making sure they don't all stick together", 'spray a large baking pan with nonstick spray , and spoon batter into 4 evenly spaced circles', 'spread batter out a bit with the back of a spoon', 'place pan in the oven for 12 - 14 minutes', 'remove pan from the oven and allow to cool slightly', "then grab 'n go !"] | i received a hungry girl email today and this was one of the recipes that were featured.  here is what the email said about the recipe:                                                                                                                    | ['oats', 'whole wheat flour', 'fiber one cereal', 'splenda granular', 'peach baby food', 'canned pumpkin', 'liquid egg substitute', 'golden raisin', 'craisins', 'brown sugar', 'sugar-free french vanilla powdered coffee creamer', 'baking powder', 'cinnamon', 'salt'] |              14 |        5     |          182.4 |                 2 |            50 |              7 |              11 |                     1 |                    13 |
|           |             |            |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                |           |                  |             |                                                                                                                                                                                                                                                                                                                                                                                                         |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | these things are large, fiber-packed, portable, and sooo delicious!!!! make a batch in the pm, and you'll have super-quick b-fasts for the next few ams!                                                                                                   |                                                                                                                                                                                                                                                                           |                 |              |                |                   |               |                |                 |                       |                       |
|           |             |            |          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                |           |                  |             |                                                                                                                                                                                                                                                                                                                                                                                                         |           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | hg alternative! if you don't feel like whipping out the blender to grind that fiber one, simply leave the f1 crumbs out of the recipe. your cookies won't be as high in fiber, but they'll still taste great and clock in with a points. value of 2* each. |                                                                                                                                                                                                                                                                           |                 |              |                |                   |               |                |                 |                       |                       |
|     22174 |      342209 | 2008-12-28 |        4 | I am changing my initial review because they got better overnight! At first they seemed a bit blah but I just had one and the sweetness and flavor have improved greatly. Other great thing is these were simple and I had everything on hand! Thank you!                                                                                                                                                                                                       | banana oatmeal cookies                                         |        40 |           361931 | 2008-12-08  | ['60-minutes-or-less', 'time-to-make', 'course', 'preparation', 'desserts', 'cookies-and-brownies']                                                                                                                                                                                                                                                                                                     |         7 | ['sift flour , soda , baking powder and salt together', 'cream together sugar and shortening', 'beat in well beaten eggs', 'stir in the vanilla , lemon juice , and banana', 'add rolled oats and flour alternately to the banana mixture , mixing well after each addition', 'stir in nuts', 'drop by teaspoonfuls onto greased baking sheet and bake in preheated 350 oven 15 to 18 minutes , or until golden']                                                                                                                                                                                                                                                                                                                                                                                                                            | a twist on an old favorite                                                                                                                                                                                                                                 | ['sugar', 'butter', 'eggs', 'mashed banana', 'vanilla', 'lemon juice', 'rolled oats', 'flour', 'baking soda', 'baking powder', 'salt', 'nuts']                                                                                                                            |              12 |        4.375 |          658.2 |                45 |           151 |             35 |              24 |                    72 |                    29 |


